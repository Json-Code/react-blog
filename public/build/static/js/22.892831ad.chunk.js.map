{"version":3,"sources":["pages/web/list/detail.js"],"names":["renderer","marked","Renderer","setOptions","gfm","pedantic","sanitize","tables","breaks","smartLists","smartypants","xhtml","highlight","code","hljs","highlightAuto","value","ArticleDetail","props","_this","Object","D_Codeing_blog_admin_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_8__","this","D_Codeing_blog_admin_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_10__","D_Codeing_blog_admin_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_11__","call","state","loading","id","data","title","html","nextProps","match","params","getDetail","api","get","setState","content","extra","react__WEBPACK_IMPORTED_MODULE_13___default","a","createElement","className","antd_es_icon__WEBPACK_IMPORTED_MODULE_5__","type","style","marginRight","createdAt","marginLeft","readedCount","antd_es_card__WEBPACK_IMPORTED_MODULE_1__","antd_es_spin__WEBPACK_IMPORTED_MODULE_3__","spinning","dangerouslySetInnerHTML","__html","Component"],"mappings":"4TAaMA,WAAW,IAAIC,IAAOC,UAC5BD,IAAOE,WAAW,CAChBH,SAAUA,EACVI,KAAK,EACLC,UAAU,EACVC,UAAU,EACVC,QAAQ,EACRC,QAAQ,EACRC,YAAY,EACZC,aAAa,EACbC,OAAO,EACPC,UAAW,SAAUC,GACjB,OAAOC,IAAKC,cAAcF,GAAMG,aAIhCC,cACJ,SAAAA,EAAaC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IAClBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,MAAQ,CACXC,SAAS,EACTC,GAAI,GACJC,KAAM,CACJC,MAAO,IAITC,KAAM,IAVUZ,yFAaMa,GACxB,IAAMJ,EAAKI,EAAUC,MAAMC,OAAON,GAElCA,IADcN,KAAKJ,MAAMe,MAAMC,OAAON,IACtBN,KAAKa,UAAUP,+CAG/B,IAAMA,EAAKN,KAAKJ,MAAMe,MAAMC,OAAON,GACnCN,KAAKa,UAAUP,6EAEAA,+FACMQ,IAAIC,IAAI,kBAAmB,CAACT,uBAA1CC,SACPP,KAAKgB,SAAS,CAACT,SACPU,EAAYV,EAAZU,QACFR,EAAO9B,IAAOsC,GACpBjB,KAAKgB,SAAS,CAAEP,OAAMJ,SAAS,wIAEvB,IACAE,EAASP,KAAKI,MAAdG,KAEFW,EAAQC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBAC3BH,EAAAC,EAAAC,cAAAE,EAAA,GAAMC,KAAK,WAAWC,MAAO,CAAEC,YAAa,KAC1CnB,EAAKoB,UACPR,EAAAC,EAAAC,cAAAE,EAAA,GAAMC,KAAK,MAAMC,MAAO,CAAEC,YAAa,EAAGE,WAAY,KACpDrB,EAAKsB,YAJK,uBAOd,OACEV,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAAS,EAAA,GACAtB,MAAOD,EAAKC,MACZU,MAAOA,GAELC,EAAAC,EAAAC,cAAAU,EAAA,GAAMT,UAAU,kBAAkBU,SAAUhC,KAAKI,MAAMC,UAOvDc,EAAAC,EAAAC,cAAA,OAAKY,wBAA2B,CAACC,OAAQvD,IAAOqB,KAAKI,MAAMK,kBArDzC0B,aA4DbxC","file":"static/js/22.892831ad.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport { Card, Icon, Spin } from 'antd'\r\n// import { EditorState, ContentState } from 'draft-js'\r\n// import { Editor } from 'react-draft-wysiwyg'\r\n// import htmlToDraft from 'html-to-draftjs'\r\n// import 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css'\r\nimport marked from 'marked'\r\nimport hljs from \"highlight.js\";\r\nimport 'highlight.js/styles/monokai-sublime.css';\r\n\r\nimport api from '../../../api'\r\nimport './detail.less'\r\n\r\nconst renderer = new marked.Renderer();\r\nmarked.setOptions({\r\n  renderer: renderer,\r\n  gfm: true,\r\n  pedantic: false,\r\n  sanitize: false,\r\n  tables: true,\r\n  breaks: false,\r\n  smartLists: true,\r\n  smartypants: false,\r\n  xhtml: false,\r\n  highlight: function (code) {\r\n      return hljs.highlightAuto(code).value;\r\n  }\r\n}); \r\n\r\nclass ArticleDetail extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      loading: true,\r\n      id: '',\r\n      data: {\r\n        title: ''\r\n      },\r\n      // editorState: EditorState.createEmpty()\r\n\r\n      html: ''\r\n    }\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    const id = nextProps.match.params.id\r\n    const preId = this.props.match.params.id\r\n    id !== preId && this.getDetail(id)\r\n  }\r\n  componentDidMount () {\r\n    const id = this.props.match.params.id\r\n    this.getDetail(id)\r\n  }\r\n  async getDetail (id) {\r\n    const {data} = await api.get('/article/detail', {id})\r\n    this.setState({data})\r\n    const { content } = data\r\n    const html = marked(content)\r\n    this.setState({ html, loading: false })\r\n  }\r\n  render () {\r\n    const { data } = this.state\r\n\r\n    const extra = <div className='content-extra'>\r\n      <Icon type='calendar' style={{ marginRight: 8 }} />\r\n      { data.createdAt }\r\n      <Icon type=\"eye\" style={{ marginRight: 8, marginLeft: 8 }} />\r\n      { data.readedCount } 次预览\r\n    </div>\r\n\r\n    return (\r\n      <div>\r\n        <Card\r\n        title={data.title}\r\n        extra={extra}\r\n        >\r\n          <Spin className='loading-contain' spinning={this.state.loading}/>\r\n          {/* <Editor\r\n          readOnly\r\n          toolbarHidden\r\n          editorState={this.state.editorState}\r\n          editorClassName=\"editor\"\r\n          /> */}\r\n          <div dangerouslySetInnerHTML = {{__html: marked(this.state.html)}}></div>\r\n        </Card>\r\n      </div> \r\n    )\r\n  }\r\n}\r\n\r\nexport default ArticleDetail"],"sourceRoot":""}