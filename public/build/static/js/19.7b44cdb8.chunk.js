(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1121:function(e,t,a){},1138:function(e,t,a){"use strict";a.r(t);a(206);var n=a(99),r=(a(285),a(100)),s=(a(286),a(148)),o=a(111),i=a.n(o),c=(a(207),a(86)),l=a(842),u=a(204),m=a(80),d=a(81),p=a(83),h=a(82),g=a(209),f=a(84),y=(a(733),a(721)),b=a(0),k=a.n(b),v=a(1131),w=(a(1121),a(205)),E=y.a.Option,x=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(){var e=Object(u.a)(i.a.mark(function e(t,n){var r,s,o,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=20;break}if(r=a.state.markdown,console.log(n.tag),s=Object(l.a)({},n,{category:String(n.category),tag:String(n.tag),content:r}),!a.state.id){e.next=14;break}return console.log(1111),s.id=a.state.id,e.next=9,w.a.post("/article/update",s);case 9:o=e.sent,1e3===o.code&&(c.a.success("\u4fee\u6539\u6210\u529f"),a.props.history.push("/admin/article")),e.next=20;break;case 14:return console.log(222),e.next=17,w.a.post("/article/create",s);case 17:u=e.sent,1e3===u.code&&(c.a.success("\u65b0\u589e\u6210\u529f"),a.props.history.push("/admin/article"));case 20:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.state={id:"",tag:[],category:[],form:{author:"",title:""},markdown:""},a.updateMarkdown=a.updateMarkdown.bind(Object(g.a)(a)),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"updateMarkdown",value:function(e,t,a){this.setState({markdown:a})}},{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.setState({id:e}),this.getTagList(),e&&this.getDetail(e)}},{key:"getDetail",value:function(){var e=Object(u.a)(i.a.mark(function e(t){var a,n,r,s,o,c,l,u,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/article/item",{id:t});case 2:if(a=e.sent,n=a.code,r=a.data,1e3===n){e.next=7;break}return e.abrupt("return",!1);case 7:s=r.title,o=r.author,c=r.summary,l=r.category,u=r.tag,m=r.content,this.props.form.setFieldsValue({title:s,author:o,summary:c,category:l,tag:u}),this.setState({markdown:m});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getTagList",value:function(){var e=Object(u.a)(i.a.mark(function e(){var t,a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("tag/list/all");case 2:return t=e.sent,a=t.data,1e3===t.code&&this.setState({tag:a}),e.next=8,w.a.get("category/list/all");case 8:1e3===(n=e.sent).code&&this.setState({category:n.data});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChangeTag",value:function(e){console.log(e)}},{key:"handlChangeeCategory",value:function(e){console.log(e)}},{key:"onEditorStateChange",value:function(e){this.setState({editorState:e})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.category.map(function(e){return k.a.createElement(E,{value:e.name,key:e.name},e.name)}),a=this.state.tag.map(function(e){return k.a.createElement(E,{value:e.name,key:e.name},e.name)}),o=this.state.id?"update":"create";return k.a.createElement("div",{className:"admin-article"},k.a.createElement(r.a,Object.assign({onSubmit:this.handleSubmit},{labelCol:{xs:{span:8},sm:{span:5},xxl:{span:2}},wrapperCol:{xs:{span:24},sm:{span:16},md:{span:12}}}),k.a.createElement(r.a.Item,{label:"\u6807\u9898"},e("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}]})(k.a.createElement(s.a,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"}))),k.a.createElement(r.a.Item,{label:"\u4f5c\u8005"},e("author",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f5c\u8005"}]})(k.a.createElement(s.a,{placeholder:"\u8bf7\u8f93\u5165\u4f5c\u8005"}))),k.a.createElement(r.a.Item,{label:"\u6458\u8981"},e("summary",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63cf\u8ff0"}]})(k.a.createElement(s.a,{placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0"}))),k.a.createElement(r.a.Item,{label:"\u5206\u7c7b"},e("category",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u7c7b"}]})(k.a.createElement(y.a,{mode:"multiple",style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u6807\u7b7e",addonBefore:"\u6807\u7b7e",onChange:this.handlChangeeCategory.bind(this)},t))),k.a.createElement(r.a.Item,{label:"\u6807\u7b7e"},e("tag",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6807\u7b7e"}]})(k.a.createElement(y.a,{mode:"multiple",style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u6807\u7b7e",addonBefore:"\u6807\u7b7e",onChange:this.handleChangeTag.bind(this)},a))),k.a.createElement(r.a.Item,{label:"\u5185\u5bb9",wrapperCol:{span:19}},k.a.createElement(v.a,{value:this.state.markdown,onChange:this.updateMarkdown})),k.a.createElement(r.a.Item,{wrapperCol:{span:24}},k.a.createElement("div",{className:"article-button"},k.a.createElement(n.a,{type:"primary",htmlType:"submit"},o)))))}}]),t}(k.a.Component),C=r.a.create({name:"normal_login"})(x);t.default=C}}]);
//# sourceMappingURL=19.7b44cdb8.chunk.js.map